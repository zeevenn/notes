import{_ as s,c as a,e,o as t}from"./app-BMk1V0Kr.js";const p={};function c(o,n){return t(),a("div",null,[...n[0]||(n[0]=[e(`<h2 id="组合-composition" tabindex="-1"><a class="header-anchor" href="#组合-composition"><span>组合（Composition）</span></a></h2><p>组合是指<strong>一个类包含另一个类的实例作为成员变量</strong>，通过委托的方式复用代码，而不是通过继承。</p><h3 id="基本示例" tabindex="-1"><a class="header-anchor" href="#基本示例"><span>基本示例</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 组合：Car &quot;has-a&quot; Engine</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Engine</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Engine</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type <span class="token operator">+</span> <span class="token string">&quot; engine starting...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type <span class="token operator">+</span> <span class="token string">&quot; engine stopping...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Engine</span> engine<span class="token punctuation">;</span>  <span class="token comment">// 组合：Car 包含 Engine</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> brand<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token class-name">String</span> brand<span class="token punctuation">,</span> <span class="token class-name">String</span> engineType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Engine</span><span class="token punctuation">(</span>engineType<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 创建 Engine 实例</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brand <span class="token operator">+</span> <span class="token string">&quot; car starting...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        engine<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 委托给 Engine</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        engine<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 委托给 Engine</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brand <span class="token operator">+</span> <span class="token string">&quot; car stopped.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">&quot;Toyota&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;V6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        car<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 输出：</span>
        <span class="token comment">// Toyota car starting...</span>
        <span class="token comment">// V6 engine starting...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组合-vs-继承" tabindex="-1"><a class="header-anchor" href="#组合-vs-继承"><span>组合 vs 继承</span></a></h2><h3 id="关键区别" tabindex="-1"><a class="header-anchor" href="#关键区别"><span>关键区别</span></a></h3><table><thead><tr><th>特性</th><th>继承（Inheritance）</th><th>组合（Composition）</th></tr></thead><tbody><tr><td>关系</td><td>&quot;is-a&quot; 关系（Dog is Animal）</td><td>&quot;has-a&quot; 关系（Car has Engine）</td></tr><tr><td>耦合度</td><td>强耦合（子类依赖父类）</td><td>弱耦合（通过接口解耦）</td></tr><tr><td>灵活性</td><td>编译时确定，难以改变</td><td>运行时可以动态改变</td></tr><tr><td>代码复用</td><td>自动继承父类所有成员</td><td>需要显式委托</td></tr><tr><td>多重复用</td><td>只能继承一个父类</td><td>可以组合多个类</td></tr><tr><td>可见性</td><td>子类可以访问父类 protected</td><td>只能通过公共接口访问</td></tr><tr><td>破坏封装</td><td>可能破坏（子类依赖父类实现）</td><td>不会破坏（通过接口交互）</td></tr></tbody></table><h3 id="继承的问题" tabindex="-1"><a class="header-anchor" href="#继承的问题"><span>继承的问题</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ❌ 不好的设计：为了复用代码而继承</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Stack</span> <span class="token keyword">extends</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 问题：</span>
<span class="token comment">// 1. Stack 暴露了 ArrayList 的所有方法（add, remove, clear 等）</span>
<span class="token comment">// 2. 用户可以在任意位置插入元素，破坏了栈的 LIFO 特性</span>
<span class="token class-name">Stack</span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stack<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ❌ 可以调用，但不应该允许</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用组合改进" tabindex="-1"><a class="header-anchor" href="#使用组合改进"><span>使用组合改进</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ✅ 好的设计：使用组合</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Stack</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 组合</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        elements<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elements<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EmptyStackException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> elements<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elements<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EmptyStackException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> elements<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> elements<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 只暴露栈需要的方法，隐藏了 ArrayList 的其他方法</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="何时使用继承-何时使用组合" tabindex="-1"><a class="header-anchor" href="#何时使用继承-何时使用组合"><span>何时使用继承，何时使用组合</span></a></h2><h3 id="使用继承的场景" tabindex="-1"><a class="header-anchor" href="#使用继承的场景"><span>使用继承的场景</span></a></h3><p>继承适用于<strong>真正的 &quot;is-a&quot; 关系</strong>：</p><ul><li>子类是父类的特化版本（Dog is Animal）</li><li>需要多态行为（统一处理不同子类）</li><li>符合里氏替换原则（子类可以替换父类）</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ✅ 需要统一处理不同类型的图形</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> radius<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 多态使用</span>
<span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">totalArea</span><span class="token punctuation">(</span><span class="token class-name">Shape</span><span class="token punctuation">[</span><span class="token punctuation">]</span> shapes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Shape</span> shape <span class="token operator">:</span> shapes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        total <span class="token operator">+=</span> shape<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 多态调用</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> total<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用组合的场景" tabindex="-1"><a class="header-anchor" href="#使用组合的场景"><span>使用组合的场景</span></a></h3><p>组合适用于**&quot;has-a&quot; 关系<strong>或</strong>仅为了复用功能**：</p><p><strong>1. 仅为了代码复用</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ❌ 不要这样做</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token keyword">extends</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// ✅ 应该这样做</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> skills <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 组合</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token class-name">String</span> skill<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        skills<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>skill<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. 需要运行时改变行为</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 策略模式</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentStrategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">double</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShoppingCart</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentStrategy</span> paymentStrategy<span class="token punctuation">;</span>  <span class="token comment">// 组合</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPaymentStrategy</span><span class="token punctuation">(</span><span class="token class-name">PaymentStrategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>paymentStrategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>  <span class="token comment">// 动态切换</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkout</span><span class="token punctuation">(</span><span class="token keyword">double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        paymentStrategy<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. 需要组合多个功能</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartPhone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Camera</span> camera<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">GPS</span> gps<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">MusicPlayer</span> player<span class="token punctuation">;</span>
    <span class="token comment">// 组合多个功能</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组合的实现方式" tabindex="-1"><a class="header-anchor" href="#组合的实现方式"><span>组合的实现方式</span></a></h2><h3 id="_1-直接创建-强组合" tabindex="-1"><a class="header-anchor" href="#_1-直接创建-强组合"><span>1. 直接创建（强组合）</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Engine</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Engine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Car 创建 Engine</span>
    <span class="token comment">// 当 Car 被销毁时，Engine 也会被销毁</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-依赖注入-松耦合" tabindex="-1"><a class="header-anchor" href="#_2-依赖注入-松耦合"><span>2. 依赖注入（松耦合）</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Engine</span> engine<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token class-name">Engine</span> engine<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>engine <span class="token operator">=</span> engine<span class="token punctuation">;</span>  <span class="token comment">// 从外部注入</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Engine</span> engine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Engine</span><span class="token punctuation">(</span><span class="token string">&quot;V8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Car</span> car1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span>engine<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Car</span> car2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span>engine<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 多个 Car 可以共享同一个 Engine</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-通过接口解耦-最佳实践" tabindex="-1"><a class="header-anchor" href="#_3-通过接口解耦-最佳实践"><span>3. 通过接口解耦（最佳实践）</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 定义接口</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Engine</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Car 依赖接口，而不是具体实现</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Engine</span> engine<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token class-name">Engine</span> engine<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>engine <span class="token operator">=</span> engine<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        engine<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不关心具体是什么引擎</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 灵活使用不同的实现</span>
<span class="token class-name">Car</span> electricCar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ElectricEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Car</span> gasCar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GasEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实际案例对比" tabindex="-1"><a class="header-anchor" href="#实际案例对比"><span>实际案例对比</span></a></h2><h3 id="案例-1-文本编辑器的撤销功能" tabindex="-1"><a class="header-anchor" href="#案例-1-文本编辑器的撤销功能"><span>案例 1：文本编辑器的撤销功能</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ❌ 继承：暴露了 Stack 的所有方法，破坏封装</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UndoManager</span> <span class="token keyword">extends</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">executeCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">push</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ✅ 组合：只暴露需要的方法</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UndoManager</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">&gt;</span></span> history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">executeCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>history<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            history<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="案例-2-员工系统" tabindex="-1"><a class="header-anchor" href="#案例-2-员工系统"><span>案例 2：员工系统</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ✅ 继承：真正的 &quot;is-a&quot; 关系，需要多态</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">calculateSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FullTimeEmployee</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">calculateSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> baseSalary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 多态使用</span>
<span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">calculateTotalPayroll</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">[</span><span class="token punctuation">]</span> employees<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Employee</span> emp <span class="token operator">:</span> employees<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        total <span class="token operator">+=</span> emp<span class="token punctuation">.</span><span class="token function">calculateSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 多态</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> total<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ✅ 组合：需要混合多种能力</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Skill</span><span class="token punctuation">&gt;</span></span> skills <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 组合</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token class-name">Skill</span> skill<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        skills<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>skill<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 一个员工可以有多种技能</span>
<span class="token class-name">Employee</span> alice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
alice<span class="token punctuation">.</span><span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JavaSkill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
alice<span class="token punctuation">.</span><span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DesignSkill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 灵活组合</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设计原则" tabindex="-1"><a class="header-anchor" href="#设计原则"><span>设计原则</span></a></h2><h3 id="组合复用原则-composite-reuse-principle" tabindex="-1"><a class="header-anchor" href="#组合复用原则-composite-reuse-principle"><span>组合复用原则（Composite Reuse Principle）</span></a></h3><p><strong>优先使用对象组合，而不是类继承来实现代码复用。</strong></p><p>原因：</p><ol><li>继承破坏封装性，子类依赖父类的实现细节</li><li>继承是静态的（编译时确定），组合是动态的（运行时可变）</li><li>Java 只支持单继承，但可以组合多个对象</li></ol><h3 id="依赖倒置原则-dependency-inversion-principle" tabindex="-1"><a class="header-anchor" href="#依赖倒置原则-dependency-inversion-principle"><span>依赖倒置原则（Dependency Inversion Principle）</span></a></h3><p><strong>依赖抽象（接口），而不是具体实现。</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// ❌ 依赖具体实现：强耦合</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">MySQLDatabase</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MySQLDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ✅ 依赖抽象：可以轻松切换实现</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Database</span> db<span class="token punctuation">;</span>  <span class="token comment">// 依赖接口</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderService</span><span class="token punctuation">(</span><span class="token class-name">Database</span> db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>db <span class="token operator">=</span> db<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">OrderService</span> service1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderService</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MySQLDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">OrderService</span> service2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderService</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MongoDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><strong>优先考虑组合</strong>：除非明确是 &quot;is-a&quot; 关系且需要多态，否则使用组合</li><li><strong>使用接口解耦</strong>：组合时依赖接口，而不是具体类</li><li><strong>依赖注入</strong>：通过构造方法或 setter 注入依赖，提高可测试性</li><li><strong>避免过度设计</strong>：如果关系简单明确，不要为了组合而组合</li><li><strong>组合 + 接口 = 灵活性</strong>：结合接口使用组合，可以获得最大的灵活性</li><li><strong>封装性</strong>：组合不会暴露内部实现，保持良好的封装性</li><li><strong>单一职责</strong>：每个类只负责一件事，通过组合多个类实现复杂功能</li></ol><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><table><thead><tr><th>选择依据</th><th>继承</th><th>组合</th></tr></thead><tbody><tr><td>关系类型</td><td>is-a（Dog is Animal）</td><td>has-a（Car has Engine）</td></tr><tr><td>是否需要多态</td><td>✅ 需要</td><td>❌ 不需要</td></tr><tr><td>是否需要运行时改变行为</td><td>❌ 不支持</td><td>✅ 支持</td></tr><tr><td>是否需要复用多个类</td><td>❌ 只能继承一个父类</td><td>✅ 可以组合多个</td></tr><tr><td>耦合度</td><td>强耦合</td><td>弱耦合</td></tr><tr><td>封装性</td><td>可能破坏</td><td>保持良好</td></tr><tr><td>推荐度</td><td>谨慎使用</td><td>优先使用</td></tr></tbody></table><p><strong>原则：优先使用组合，只在真正的 &quot;is-a&quot; 关系且需要多态时才使用继承。</strong></p>`,50)])])}const i=s(p,[["render",c],["__file","08-composition.html.vue"]]),u=JSON.parse('{"path":"/backend/java/language/08-composition.html","title":"Composition","lang":"zh-CN","frontmatter":{"title":"Composition","date":"2026-02-12T00:00:00.000Z","category":"java","description":"组合（Composition） 组合是指一个类包含另一个类的实例作为成员变量，通过委托的方式复用代码，而不是通过继承。 基本示例 组合 vs 继承 关键区别 继承的问题 使用组合改进 何时使用继承，何时使用组合 使用继承的场景 继承适用于真正的 \\"is-a\\" 关系： 子类是父类的特化版本（Dog is Animal） 需要多态行为（统一处理不同子类） ...","head":[["meta",{"property":"og:url","content":"https://dribble-njr.github.io/blog/blog/backend/java/language/08-composition.html"}],["meta",{"property":"og:title","content":"Composition"}],["meta",{"property":"og:description","content":"组合（Composition） 组合是指一个类包含另一个类的实例作为成员变量，通过委托的方式复用代码，而不是通过继承。 基本示例 组合 vs 继承 关键区别 继承的问题 使用组合改进 何时使用继承，何时使用组合 使用继承的场景 继承适用于真正的 \\"is-a\\" 关系： 子类是父类的特化版本（Dog is Animal） 需要多态行为（统一处理不同子类） ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-12T09:56:03.000Z"}],["meta",{"property":"article:author","content":"njr"}],["meta",{"property":"article:published_time","content":"2026-02-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-12T09:56:03.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Composition\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2026-02-12T00:00:00.000Z\\",\\"dateModified\\":\\"2026-02-12T09:56:03.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"njr\\",\\"url\\":\\"https://github.com/dribble-njr/blog\\",\\"email\\":\\"wzw15292257101@163.com\\"}]}"]]},"headers":[{"level":2,"title":"1 组合（Composition）","slug":"组合-composition","link":"#组合-composition","children":[{"level":3,"title":"1.1 基本示例","slug":"基本示例","link":"#基本示例","children":[]}]},{"level":2,"title":"2 组合 vs 继承","slug":"组合-vs-继承","link":"#组合-vs-继承","children":[{"level":3,"title":"2.1 关键区别","slug":"关键区别","link":"#关键区别","children":[]},{"level":3,"title":"2.2 继承的问题","slug":"继承的问题","link":"#继承的问题","children":[]},{"level":3,"title":"2.3 使用组合改进","slug":"使用组合改进","link":"#使用组合改进","children":[]}]},{"level":2,"title":"3 何时使用继承，何时使用组合","slug":"何时使用继承-何时使用组合","link":"#何时使用继承-何时使用组合","children":[{"level":3,"title":"3.1 使用继承的场景","slug":"使用继承的场景","link":"#使用继承的场景","children":[]},{"level":3,"title":"3.2 使用组合的场景","slug":"使用组合的场景","link":"#使用组合的场景","children":[]}]},{"level":2,"title":"4 组合的实现方式","slug":"组合的实现方式","link":"#组合的实现方式","children":[{"level":3,"title":"4.1 1. 直接创建（强组合）","slug":"_1-直接创建-强组合","link":"#_1-直接创建-强组合","children":[]},{"level":3,"title":"4.2 2. 依赖注入（松耦合）","slug":"_2-依赖注入-松耦合","link":"#_2-依赖注入-松耦合","children":[]},{"level":3,"title":"4.3 3. 通过接口解耦（最佳实践）","slug":"_3-通过接口解耦-最佳实践","link":"#_3-通过接口解耦-最佳实践","children":[]}]},{"level":2,"title":"5 实际案例对比","slug":"实际案例对比","link":"#实际案例对比","children":[{"level":3,"title":"5.1 案例 1：文本编辑器的撤销功能","slug":"案例-1-文本编辑器的撤销功能","link":"#案例-1-文本编辑器的撤销功能","children":[]},{"level":3,"title":"5.2 案例 2：员工系统","slug":"案例-2-员工系统","link":"#案例-2-员工系统","children":[]}]},{"level":2,"title":"6 设计原则","slug":"设计原则","link":"#设计原则","children":[{"level":3,"title":"6.1 组合复用原则（Composite Reuse Principle）","slug":"组合复用原则-composite-reuse-principle","link":"#组合复用原则-composite-reuse-principle","children":[]},{"level":3,"title":"6.2 依赖倒置原则（Dependency Inversion Principle）","slug":"依赖倒置原则-dependency-inversion-principle","link":"#依赖倒置原则-dependency-inversion-principle","children":[]}]},{"level":2,"title":"7 最佳实践","slug":"最佳实践","link":"#最佳实践","children":[]},{"level":2,"title":"8 总结","slug":"总结","link":"#总结","children":[]}],"git":{"createdTime":1770890163000,"updatedTime":1770890163000,"contributors":[{"name":"ziven","email":"contact@ziven.me","commits":1}]},"readingTime":{"minutes":5.62,"words":1687},"filePathRelative":"backend/java/language/08-composition.md","localizedDate":"2026年2月12日","excerpt":"","autoDesc":true}');export{i as comp,u as data};
